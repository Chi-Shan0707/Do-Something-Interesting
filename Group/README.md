# 解决一个真实的分组问题
## 原来后台能看到这么多东西
### 原来数据如此丑陋

## 匹配与打分逻辑

以下为本仓库中匹配与打分逻辑的简要说明，具体实现见 [match.py](Group/match.py#L1-L399)。

- **数据预处理**: 对 CSV 中的字段做清洗、去空格并统一命名；多选项通过正则分隔（分隔符包括 `; , ， | 换行`）；尝试识别邮箱、问卷编号、学号等字段并合成 `person_id`（格式：survey---student---email）；对邮箱做简单正则校验。

- **特征构建**: 将多选题（赛道、掌控部分、熟悉技能）使用 `MultiLabelBinarizer` 做 one-hot 编码；单选题（首要目标）也用 one-hot 处理；将 `philosophy`（由多道题聚合得出）作为额外的分类特征加入，最终用 `numpy.hstack` 合并为每人的特征向量矩阵 `X`。

- **philosophy 打分规则**: 基于问卷中的若干题（代码中映射为 Q12-Q15）分别打分再求和：
	- Q12: 含“主导/主导者”得 2 分，含“分析/分析者”得 1 分，否则 0 分；
	- Q13: 含“内归因/反思”得 1 分，否则 0 分；
	- Q14: 含“死磕/不睡”得 2 分，含“收缩/砍”得 1 分，否则 0 分；
	- Q15: 含“实用”得 1 分，否则 0 分。
	- 总分映射为标签：>=5 -> 强驱动型；4 -> 务实且有主见；2-3 -> 平衡型；<2 -> 协作/体验优先。

- **相似度与推荐**: 使用余弦相似度（cosine similarity）衡量两人特征向量的相似性；若某一向量范数为 0，则相似度定义为 0；对每个人计算与其他所有人的相似度并按从大到小排序，取 top-K 作为匹配推荐（代码中可通过 `top_k` 参数调整）。

- **输出产物**: 脚本会导出 `choices_per_person.csv`（每人一行的摘要）、按题目统计的可视化图（若安装 matplotlib）、人-特征热图 `person_feature_matrix.png`、以及每人回答的图片 `person_answers_*.png`（若 matplotlib 可用）。

- **可配置项**: CSV 路径由 `CSV_PATH`（默认在脚本目录下的 `test.csv`）控制；推荐结果的数量通过 `top_k` 控制；若需改进可扩展更多文本或 NLP 特征。

如需查看或调整具体实现，请查看实现文件：[match.py](Group/match.py#L1-L399)。